@import url("https://scattagain.github.io/VencordStuff/css/GuildbarRevert.css");
@import url('https://raw.githubusercontent.com/surgedevs/visual-refresh-compact-title-bar/refs/heads/main/desktop.css');

:root {
    /* Guild bar variables */
    --guildbar-avatar-size: 48px;
    --blob-scale: 48;
    --guildbar-folder-size: var(--guildbar-avatar-size);
    --folder-blob-scale: var(--blob-scale);
    
    /* Animation variables for better performance */
    --panel-transition: 0.25s cubic-bezier(0.165, 0.84, 0.44, 1);
}

/* Visual refresh panels positioning */
.visual-refresh div[class^="sidebar_"] section[class^="panels_"] {
    width: calc(var(--custom-guild-sidebar-width) - var(--custom-guild-list-width) + 1px);
    left: var(--custom-guild-list-width);
    bottom: 0;
    border-radius: 0;
    border: none;
}

.visual-refresh nav[class*=guilds_] {
    margin-bottom: unset;
}

/* Panels styling with performance optimizations */
.panels_c48ade {
    left: var(--space-sm) !important;
    height: 57px !important;
    width: 56px !important;
    border-radius: 30px !important;
    display: flex !important;
    flex-direction: column;
    overflow: hidden;
    transition: height var(--panel-transition), width var(--panel-transition), border-radius var(--panel-transition);
    z-index: 50000;
    pointer-events: all;
    border: 1px solid var(--border-subtle) !important;
    will-change: width, height;
}

.panels_c48ade:has(.container_e131a9) {
    border: 1px solid var(--border-normal);
}

.wrapper_e131a9 {
    height: 0;
    overflow: hidden;
}

/* Use hardware acceleration for hover effects */
.panels_c48ade:hover {
    width: 300px !important;
    height: auto !important;
    border-radius: 15px !important;
    transform: translateZ(0);
}

.panels_c48ade:hover .wrapper_e131a9 {
    height: auto !important;
}

/* Sidebar improvements */
.sidebar_c48ade {
    overflow: visible !important;
}

.container__2637a {
    padding-bottom: 0 !important;
}

.scroller__99e7c {
    margin-bottom: 0 !important;
}

.bottom__7aaec {
    bottom: 0 !important;
}

/* Optimize button animations */
.visual-refresh [class^="panels_"] [class^="container__"] [class^="buttons__"] {
    opacity: 0;
    transform: scale(0);
    transform-origin: left;
    transition: opacity 0.15s ease-out, transform 0.15s ease-out;
    will-change: opacity, transform;
}

.visual-refresh [class^="panels_"]:hover [class^="container__"] [class^="buttons__"] {
    transform: scale(1);
    opacity: 1;
}

/* Panel visibility */
.visual-refresh .panel__5dec7 {
    display: none;
}

.visual-refresh [class^="panels_"]:hover .panel__5dec7 {
    display: block;
}

/* Timestamp optimization */
span[class*="timestampInline_"] time::before {
    content: attr(aria-label);
    font-size: 12px;
}

span[class*="timestampInline_"] {
    font-size: 0 !important;
}

/* Hide nameplates more efficiently */
[style^="background: linear-gradient(90deg"]:has([src*="/nameplates/"]) {
    display: none;
}

/* Optimize DM link plates */
[class*="dm_"]:has([class*="linkPlated_"]) [class*="linkPlated_"] {
    padding-right: var(--space-16);
}

[class*="dm_"]:has([class*="linkPlated_"]) [class*="closeButtonPlated_"] {
    opacity: 0.7;
}

[class*="dm_"]:has([class*="linkPlated_"]) [class*="closeButtonPlated_"]:hover {
    opacity: 1;
}

[class*="dm_"]:has([class*="linkPlated_"]) [class*="closeButtonPlated_"] [class^="innerCloseButtonPlated"] {
    opacity: unset;
    background: none;
}

[class*="dm_"]:has([class*="linkPlated_"]) [class*="closeButtonPlated_"] [class^="innerCloseButtonPlated"] svg {
    color: inherit;
}

[class*="dm_"]:has([class*="linkPlated_"]) [class*="closeButtonPlated_"] [class^="innerCloseButtonPlated"] svg:is(:hover, :focus-within) {
    color: var(--interactive-hover);
}

/* Hide member elements */
[class*='membersGroup']:has([role=button]),
[class*='member'] [class*='container']:has([class*='badges']) {
    display: none;
}

/* Remove quick react bar */
.button_f7ecac.hoverBarButton_f84418:nth-of-type(1),
.button_f7ecac.hoverBarButton_f84418:nth-of-type(2),
.button_f7ecac.hoverBarButton_f84418:nth-of-type(3),
.separator_f84418 {
    display: none;
}
